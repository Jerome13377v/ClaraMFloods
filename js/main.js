
var currentMap = 0; // Global variable to hold the leaflet map object

var layerControl = 0;
var currentYear = 1833;

var Oberlin2= [
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21783318848895,41.291438038172316],[-82.2176904208286,41.291428520328225],[-82.2176973907541,41.29132397144434],[-82.21784015841445,41.29133348928826],[-82.21783318848895,41.291438038172316]]]},"properties":{"Id":0,"Name":"Oberlin Hall","YearBuilt":1833,"Year":1833,"IdNo":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21756668885628,41.29184640245826],[-82.21756023463672,41.29184583778722],[-82.21755397652535,41.29184416093133],[-82.21754810467174,41.29184142284102],[-82.21754279748914,41.29183770671177],[-82.21753821623366,41.29183312545629],[-82.21753450010442,41.29182781827371],[-82.2175317620141,41.291821946420086],[-82.21753008515822,41.291815688308716],[-82.21752952048718,41.29180923408916],[-82.21753008515822,41.2918027798696],[-82.2175317620141,41.29179652175823],[-82.21753450010442,41.291790649904605],[-82.21753821623366,41.29178534272202],[-82.21754279748914,41.29178076146655],[-82.21754810467172,41.2917770453373],[-82.21755397652535,41.29177430724698],[-82.21756023463672,41.291772630391094],[-82.21756668885628,41.29177206572005],[-82.21757314307584,41.291772630391094],[-82.21757940118721,41.29177430724698],[-82.21758527304083,41.2917770453373],[-82.21759058022342,41.29178076146655],[-82.2175951614789,41.29178534272202],[-82.21759887760814,41.291790649904605],[-82.21760161569846,41.29179652175823],[-82.21760329255434,41.2918027798696],[-82.21760385722538,41.29180923408916],[-82.21760329255434,41.291815688308716],[-82.21760161569846,41.291821946420086],[-82.21759887760814,41.29182781827371],[-82.2175951614789,41.29183312545629],[-82.21759058022342,41.29183770671177],[-82.21758527304084,41.29184142284102],[-82.21757940118721,41.29184416093133],[-82.21757314307584,41.29184583778722],[-82.21756668885628,41.29184640245826]]]},"properties":{"Id":0,"Name":"Historic Elm","YearBuilt":1833,"Year":1835,"IdNo":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21818687912616,41.29142515913884],[-82.21790134380547,41.29144657428776],[-82.21790848218848,41.29132522177645],[-82.21818687912616,41.29133236015946],[-82.21818687912616,41.29142515913884]]]},"properties":{"Id":0,"Name":"Building 2","YearBuilt":1834,"Year":1835,"IdNo":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21874367300154,41.29141802075577],[-82.21840103061658,41.29140374398969],[-82.21840464310856,41.291317044183415],[-82.21874728549346,41.291331320949496],[-82.21874367300154,41.29141802075577]]]},"properties":{"Id":0,"Name":"Building 3","YearBuilt":1834,"Year":1835,"IdNo":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21983584560314,41.29109679351984],[-82.21971449309189,41.29111820866899],[-82.21966519513126,41.29083885355908],[-82.21978654764257,41.29081743840999],[-82.21983584560314,41.29109679351984]]]},"properties":{"Id":0,"Name":"Building 4","YearBuilt":1834,"Year":1835,"IdNo":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21796558925257,41.29101113292376],[-82.21773716099597,41.29100399454069],[-82.21774095652654,41.29088253756538],[-82.21796938478309,41.29088967594822],[-82.21796558925257,41.29101113292376]]]},"properties":{"Id":0,"Name":"Building 5","YearBuilt":1834,"Year":1835,"IdNo":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21846527606382,41.293414150410165],[-82.21843846012517,41.29341180431953],[-82.21841245897525,41.29340483733241],[-82.21838806264584,41.29339346113717],[-82.21836601240706,41.29337802139376],[-82.21834697824427,41.29335898723096],[-82.21833153850085,41.29333693699218],[-82.21832016230562,41.29331254066277],[-82.2183131953185,41.29328653951285],[-82.21831084922786,41.2932597235742],[-82.2183131953185,41.293232907635556],[-82.21832016230562,41.293206906485636],[-82.21833153850085,41.29318251015622],[-82.21834697824427,41.293160459917445],[-82.21836601240706,41.29314142575465],[-82.21838806264584,41.29312598601123],[-82.21841245897525,41.293114609815994],[-82.21843846012517,41.29310764282887],[-82.21846527606382,41.29310529673824],[-82.21849209200248,41.29310764282887],[-82.2185180931524,41.293114609815994],[-82.2185424894818,41.29312598601123],[-82.21856453972059,41.29314142575465],[-82.21858357388338,41.293160459917445],[-82.2185990136268,41.29318251015622],[-82.21861038982203,41.293206906485636],[-82.21861735680915,41.293232907635556],[-82.21861970289979,41.2932597235742],[-82.21861735680915,41.29328653951285],[-82.21861038982203,41.29331254066277],[-82.2185990136268,41.29333693699218],[-82.21858357388338,41.29335898723096],[-82.21856453972059,41.29337802139376],[-82.2185424894818,41.29339346113717],[-82.2185180931524,41.29340483733241],[-82.21849209200248,41.29341180431953],[-82.21846527606382,41.293414150410165]]]},"properties":{"Id":0,"Name":"Building 6","YearBuilt":1835,"Year":1835,"IdNo":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.22059251420302,41.29202478331223],[-82.22027842535022,41.29199622978007],[-82.22029071273084,41.291861068593505],[-82.22060480158365,41.291889622125666],[-82.22059251420302,41.29202478331223]]]},"properties":{"Id":0,"Name":"Building 7","YearBuilt":1835,"Year":1835,"IdNo":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21783318848895,41.291438038172316],[-82.2176904208286,41.291428520328225],[-82.2176973907541,41.29132397144434],[-82.21784015841445,41.29133348928826],[-82.21783318848895,41.291438038172316]]]},"properties":{"Id":0,"Name":"Oberlin Hall","YearBuilt":1833,"Year":1834,"IdNo":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21756668885628,41.29184640245826],[-82.21756023463672,41.29184583778722],[-82.21755397652535,41.29184416093133],[-82.21754810467174,41.29184142284102],[-82.21754279748914,41.29183770671177],[-82.21753821623366,41.29183312545629],[-82.21753450010442,41.29182781827371],[-82.2175317620141,41.291821946420086],[-82.21753008515822,41.291815688308716],[-82.21752952048718,41.29180923408916],[-82.21753008515822,41.2918027798696],[-82.2175317620141,41.29179652175823],[-82.21753450010442,41.291790649904605],[-82.21753821623366,41.29178534272202],[-82.21754279748914,41.29178076146655],[-82.21754810467172,41.2917770453373],[-82.21755397652535,41.29177430724698],[-82.21756023463672,41.291772630391094],[-82.21756668885628,41.29177206572005],[-82.21757314307584,41.291772630391094],[-82.21757940118721,41.29177430724698],[-82.21758527304083,41.2917770453373],[-82.21759058022342,41.29178076146655],[-82.2175951614789,41.29178534272202],[-82.21759887760814,41.291790649904605],[-82.21760161569846,41.29179652175823],[-82.21760329255434,41.2918027798696],[-82.21760385722538,41.29180923408916],[-82.21760329255434,41.291815688308716],[-82.21760161569846,41.291821946420086],[-82.21759887760814,41.29182781827371],[-82.2175951614789,41.29183312545629],[-82.21759058022342,41.29183770671177],[-82.21758527304084,41.29184142284102],[-82.21757940118721,41.29184416093133],[-82.21757314307584,41.29184583778722],[-82.21756668885628,41.29184640245826]]]},"properties":{"Id":0,"Name":"Historic Elm","YearBuilt":1833,"Year":1834,"IdNo":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21818687912616,41.29142515913884],[-82.21790134380547,41.29144657428776],[-82.21790848218848,41.29132522177645],[-82.21818687912616,41.29133236015946],[-82.21818687912616,41.29142515913884]]]},"properties":{"Id":0,"Name":"Building 2","YearBuilt":1834,"Year":1834,"IdNo":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21874367300154,41.29141802075577],[-82.21840103061658,41.29140374398969],[-82.21840464310856,41.291317044183415],[-82.21874728549346,41.291331320949496],[-82.21874367300154,41.29141802075577]]]},"properties":{"Id":0,"Name":"Building 3","YearBuilt":1834,"Year":1834,"IdNo":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21983584560314,41.29109679351984],[-82.21971449309189,41.29111820866899],[-82.21966519513126,41.29083885355908],[-82.21978654764257,41.29081743840999],[-82.21983584560314,41.29109679351984]]]},"properties":{"Id":0,"Name":"Building 4","YearBuilt":1834,"Year":1834,"IdNo":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21796558925257,41.29101113292376],[-82.21773716099597,41.29100399454069],[-82.21774095652654,41.29088253756538],[-82.21796938478309,41.29088967594822],[-82.21796558925257,41.29101113292376]]]},"properties":{"Id":0,"Name":"Building 5","YearBuilt":1834,"Year":1834,"IdNo":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21756668885628,41.29184640245826],[-82.21756023463672,41.29184583778722],[-82.21755397652535,41.29184416093133],[-82.21754810467174,41.29184142284102],[-82.21754279748914,41.29183770671177],[-82.21753821623366,41.29183312545629],[-82.21753450010442,41.29182781827371],[-82.2175317620141,41.291821946420086],[-82.21753008515822,41.291815688308716],[-82.21752952048718,41.29180923408916],[-82.21753008515822,41.2918027798696],[-82.2175317620141,41.29179652175823],[-82.21753450010442,41.291790649904605],[-82.21753821623366,41.29178534272202],[-82.21754279748914,41.29178076146655],[-82.21754810467172,41.2917770453373],[-82.21755397652535,41.29177430724698],[-82.21756023463672,41.291772630391094],[-82.21756668885628,41.29177206572005],[-82.21757314307584,41.291772630391094],[-82.21757940118721,41.29177430724698],[-82.21758527304083,41.2917770453373],[-82.21759058022342,41.29178076146655],[-82.2175951614789,41.29178534272202],[-82.21759887760814,41.291790649904605],[-82.21760161569846,41.29179652175823],[-82.21760329255434,41.2918027798696],[-82.21760385722538,41.29180923408916],[-82.21760329255434,41.291815688308716],[-82.21760161569846,41.291821946420086],[-82.21759887760814,41.29182781827371],[-82.2175951614789,41.29183312545629],[-82.21759058022342,41.29183770671177],[-82.21758527304084,41.29184142284102],[-82.21757940118721,41.29184416093133],[-82.21757314307584,41.29184583778722],[-82.21756668885628,41.29184640245826]]]},"properties":{"Id":0,"Name":"Historic Elm","YearBuilt":1833,"Year":1833,"IdNo":1}}
]


var gridPoly = [
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.283639114208185],[-82.2330007294201,41.28111034202425],[-82.2305642093026,41.28111034202425],[-82.2305642093026,41.283639114208185],[-82.2330007294201,41.283639114208185]]]},"properties":{"Id":0,"Letter":"A","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.28111034202425],[-82.2281276891851,41.28111034202425],[-82.2281276891851,41.283639114208185],[-82.2305642093026,41.283639114208185],[-82.2305642093026,41.28111034202425]]]},"properties":{"Id":0,"Letter":"B","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.28111034202425],[-82.2256911690676,41.28111034202425],[-82.2256911690676,41.283639114208185],[-82.2281276891851,41.283639114208185],[-82.2281276891851,41.28111034202425]]]},"properties":{"Id":0,"Letter":"C","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.28111034202425],[-82.2232546489501,41.28111034202425],[-82.2232546489501,41.283639114208185],[-82.2256911690676,41.283639114208185],[-82.2256911690676,41.28111034202425]]]},"properties":{"Id":0,"Letter":"D","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.28111034202425],[-82.2208181288326,41.28111034202425],[-82.2208181288326,41.283639114208185],[-82.2232546489501,41.283639114208185],[-82.2232546489501,41.28111034202425]]]},"properties":{"Id":0,"Letter":"E","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.28111034202425],[-82.2183816087151,41.28111034202425],[-82.2183816087151,41.283639114208185],[-82.2208181288326,41.283639114208185],[-82.2208181288326,41.28111034202425]]]},"properties":{"Id":0,"Letter":"F","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.28111034202425],[-82.2159450885976,41.28111034202425],[-82.2159450885976,41.283639114208185],[-82.2183816087151,41.283639114208185],[-82.2183816087151,41.28111034202425]]]},"properties":{"Id":0,"Letter":"G","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.28111034202425],[-82.21350856848011,41.28111034202425],[-82.21350856848011,41.283639114208185],[-82.2159450885976,41.283639114208185],[-82.2159450885976,41.28111034202425]]]},"properties":{"Id":0,"Letter":"H","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.28111034202425],[-82.21107204836261,41.28111034202425],[-82.21107204836261,41.283639114208185],[-82.21350856848011,41.283639114208185],[-82.21350856848011,41.28111034202425]]]},"properties":{"Id":0,"Letter":"I","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.28111034202425],[-82.20863552824511,41.28111034202425],[-82.20863552824511,41.283639114208185],[-82.21107204836261,41.283639114208185],[-82.21107204836261,41.28111034202425]]]},"properties":{"Id":0,"Letter":"J","Number":1}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.283639114208185],[-82.2305642093026,41.283639114208185],[-82.2305642093026,41.28616788639212],[-82.2330007294201,41.28616788639212],[-82.2330007294201,41.283639114208185]]]},"properties":{"Id":0,"Letter":"A","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.283639114208185],[-82.2281276891851,41.283639114208185],[-82.2281276891851,41.28616788639212],[-82.2305642093026,41.28616788639212],[-82.2305642093026,41.283639114208185]]]},"properties":{"Id":0,"Letter":"B","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.283639114208185],[-82.2256911690676,41.283639114208185],[-82.2256911690676,41.28616788639212],[-82.2281276891851,41.28616788639212],[-82.2281276891851,41.283639114208185]]]},"properties":{"Id":0,"Letter":"C","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.283639114208185],[-82.2232546489501,41.283639114208185],[-82.2232546489501,41.28616788639212],[-82.2256911690676,41.28616788639212],[-82.2256911690676,41.283639114208185]]]},"properties":{"Id":0,"Letter":"D","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.283639114208185],[-82.2208181288326,41.283639114208185],[-82.2208181288326,41.28616788639212],[-82.2232546489501,41.28616788639212],[-82.2232546489501,41.283639114208185]]]},"properties":{"Id":0,"Letter":"E","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.283639114208185],[-82.2183816087151,41.283639114208185],[-82.2183816087151,41.28616788639212],[-82.2208181288326,41.28616788639212],[-82.2208181288326,41.283639114208185]]]},"properties":{"Id":0,"Letter":"F","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.283639114208185],[-82.2159450885976,41.283639114208185],[-82.2159450885976,41.28616788639212],[-82.2183816087151,41.28616788639212],[-82.2183816087151,41.283639114208185]]]},"properties":{"Id":0,"Letter":"G","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.283639114208185],[-82.21350856848011,41.283639114208185],[-82.21350856848011,41.28616788639212],[-82.2159450885976,41.28616788639212],[-82.2159450885976,41.283639114208185]]]},"properties":{"Id":0,"Letter":"H","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.283639114208185],[-82.21107204836261,41.283639114208185],[-82.21107204836261,41.28616788639212],[-82.21350856848011,41.28616788639212],[-82.21350856848011,41.283639114208185]]]},"properties":{"Id":0,"Letter":"I","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.283639114208185],[-82.20863552824511,41.283639114208185],[-82.20863552824511,41.28616788639212],[-82.21107204836261,41.28616788639212],[-82.21107204836261,41.283639114208185]]]},"properties":{"Id":0,"Letter":"J","Number":2}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.288696658576065],[-82.2330007294201,41.28616788639213],[-82.2305642093026,41.28616788639213],[-82.2305642093026,41.288696658576065],[-82.2330007294201,41.288696658576065]]]},"properties":{"Id":0,"Letter":"A","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.28616788639213],[-82.2281276891851,41.28616788639213],[-82.2281276891851,41.288696658576065],[-82.2305642093026,41.288696658576065],[-82.2305642093026,41.28616788639213]]]},"properties":{"Id":0,"Letter":"B","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.28616788639213],[-82.2256911690676,41.28616788639213],[-82.2256911690676,41.288696658576065],[-82.2281276891851,41.288696658576065],[-82.2281276891851,41.28616788639213]]]},"properties":{"Id":0,"Letter":"C","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.28616788639213],[-82.2232546489501,41.28616788639213],[-82.2232546489501,41.288696658576065],[-82.2256911690676,41.288696658576065],[-82.2256911690676,41.28616788639213]]]},"properties":{"Id":0,"Letter":"D","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.28616788639213],[-82.2208181288326,41.28616788639213],[-82.2208181288326,41.288696658576065],[-82.2232546489501,41.288696658576065],[-82.2232546489501,41.28616788639213]]]},"properties":{"Id":0,"Letter":"E","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.28616788639213],[-82.2183816087151,41.28616788639213],[-82.2183816087151,41.288696658576065],[-82.2208181288326,41.288696658576065],[-82.2208181288326,41.28616788639213]]]},"properties":{"Id":0,"Letter":"F","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.28616788639213],[-82.2159450885976,41.28616788639213],[-82.2159450885976,41.288696658576065],[-82.2183816087151,41.288696658576065],[-82.2183816087151,41.28616788639213]]]},"properties":{"Id":0,"Letter":"G","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.28616788639213],[-82.21350856848011,41.28616788639213],[-82.21350856848011,41.288696658576065],[-82.2159450885976,41.288696658576065],[-82.2159450885976,41.28616788639213]]]},"properties":{"Id":0,"Letter":"H","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.28616788639213],[-82.21107204836261,41.28616788639213],[-82.21107204836261,41.288696658576065],[-82.21350856848011,41.288696658576065],[-82.21350856848011,41.28616788639213]]]},"properties":{"Id":0,"Letter":"I","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.28616788639213],[-82.20863552824511,41.28616788639213],[-82.20863552824511,41.288696658576065],[-82.21107204836261,41.288696658576065],[-82.21107204836261,41.28616788639213]]]},"properties":{"Id":0,"Letter":"J","Number":3}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.288696658576065],[-82.2305642093026,41.288696658576065],[-82.2305642093026,41.29122543076],[-82.2330007294201,41.29122543076],[-82.2330007294201,41.288696658576065]]]},"properties":{"Id":0,"Letter":"A","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.288696658576065],[-82.2281276891851,41.288696658576065],[-82.2281276891851,41.29122543076],[-82.2305642093026,41.29122543076],[-82.2305642093026,41.288696658576065]]]},"properties":{"Id":0,"Letter":"B","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.288696658576065],[-82.2256911690676,41.288696658576065],[-82.2256911690676,41.29122543076],[-82.2281276891851,41.29122543076],[-82.2281276891851,41.288696658576065]]]},"properties":{"Id":0,"Letter":"C","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.288696658576065],[-82.2232546489501,41.288696658576065],[-82.2232546489501,41.29122543076],[-82.2256911690676,41.29122543076],[-82.2256911690676,41.288696658576065]]]},"properties":{"Id":0,"Letter":"D","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.288696658576065],[-82.2208181288326,41.288696658576065],[-82.2208181288326,41.29122543076],[-82.2232546489501,41.29122543076],[-82.2232546489501,41.288696658576065]]]},"properties":{"Id":0,"Letter":"E","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.288696658576065],[-82.2183816087151,41.288696658576065],[-82.2183816087151,41.29122543076],[-82.2208181288326,41.29122543076],[-82.2208181288326,41.288696658576065]]]},"properties":{"Id":0,"Letter":"F","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.288696658576065],[-82.2159450885976,41.288696658576065],[-82.2159450885976,41.29122543076],[-82.2183816087151,41.29122543076],[-82.2183816087151,41.288696658576065]]]},"properties":{"Id":0,"Letter":"G","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.288696658576065],[-82.21350856848011,41.288696658576065],[-82.21350856848011,41.29122543076],[-82.2159450885976,41.29122543076],[-82.2159450885976,41.288696658576065]]]},"properties":{"Id":0,"Letter":"H","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.288696658576065],[-82.21107204836261,41.288696658576065],[-82.21107204836261,41.29122543076],[-82.21350856848011,41.29122543076],[-82.21350856848011,41.288696658576065]]]},"properties":{"Id":0,"Letter":"I","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.288696658576065],[-82.20863552824511,41.288696658576065],[-82.20863552824511,41.29122543076],[-82.21107204836261,41.29122543076],[-82.21107204836261,41.288696658576065]]]},"properties":{"Id":0,"Letter":"J","Number":4}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.293754202943944],[-82.2330007294201,41.29122543076001],[-82.2305642093026,41.29122543076001],[-82.2305642093026,41.293754202943944],[-82.2330007294201,41.293754202943944]]]},"properties":{"Id":0,"Letter":"A","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.29122543076001],[-82.2281276891851,41.29122543076001],[-82.2281276891851,41.293754202943944],[-82.2305642093026,41.293754202943944],[-82.2305642093026,41.29122543076001]]]},"properties":{"Id":0,"Letter":"B","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.29122543076001],[-82.2256911690676,41.29122543076001],[-82.2256911690676,41.293754202943944],[-82.2281276891851,41.293754202943944],[-82.2281276891851,41.29122543076001]]]},"properties":{"Id":0,"Letter":"C","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.29122543076001],[-82.2232546489501,41.29122543076001],[-82.2232546489501,41.293754202943944],[-82.2256911690676,41.293754202943944],[-82.2256911690676,41.29122543076001]]]},"properties":{"Id":0,"Letter":"D","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.29122543076001],[-82.2208181288326,41.29122543076001],[-82.2208181288326,41.293754202943944],[-82.2232546489501,41.293754202943944],[-82.2232546489501,41.29122543076001]]]},"properties":{"Id":0,"Letter":"E","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.29122543076001],[-82.2183816087151,41.29122543076001],[-82.2183816087151,41.293754202943944],[-82.2208181288326,41.293754202943944],[-82.2208181288326,41.29122543076001]]]},"properties":{"Id":0,"Letter":"F","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.29122543076001],[-82.2159450885976,41.29122543076001],[-82.2159450885976,41.293754202943944],[-82.2183816087151,41.293754202943944],[-82.2183816087151,41.29122543076001]]]},"properties":{"Id":0,"Letter":"G","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.29122543076001],[-82.21350856848011,41.29122543076001],[-82.21350856848011,41.293754202943944],[-82.2159450885976,41.293754202943944],[-82.2159450885976,41.29122543076001]]]},"properties":{"Id":0,"Letter":"H","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.29122543076001],[-82.21107204836261,41.29122543076001],[-82.21107204836261,41.293754202943944],[-82.21350856848011,41.293754202943944],[-82.21350856848011,41.29122543076001]]]},"properties":{"Id":0,"Letter":"I","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.29122543076001],[-82.20863552824511,41.29122543076001],[-82.20863552824511,41.293754202943944],[-82.21107204836261,41.293754202943944],[-82.21107204836261,41.29122543076001]]]},"properties":{"Id":0,"Letter":"J","Number":5}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.293754202943944],[-82.2305642093026,41.293754202943944],[-82.2305642093026,41.29628297512788],[-82.2330007294201,41.29628297512788],[-82.2330007294201,41.293754202943944]]]},"properties":{"Id":0,"Letter":"A","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.293754202943944],[-82.2281276891851,41.293754202943944],[-82.2281276891851,41.29628297512788],[-82.2305642093026,41.29628297512788],[-82.2305642093026,41.293754202943944]]]},"properties":{"Id":0,"Letter":"B","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.293754202943944],[-82.2256911690676,41.293754202943944],[-82.2256911690676,41.29628297512788],[-82.2281276891851,41.29628297512788],[-82.2281276891851,41.293754202943944]]]},"properties":{"Id":0,"Letter":"C","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.293754202943944],[-82.2232546489501,41.293754202943944],[-82.2232546489501,41.29628297512788],[-82.2256911690676,41.29628297512788],[-82.2256911690676,41.293754202943944]]]},"properties":{"Id":0,"Letter":"D","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.293754202943944],[-82.2208181288326,41.293754202943944],[-82.2208181288326,41.29628297512788],[-82.2232546489501,41.29628297512788],[-82.2232546489501,41.293754202943944]]]},"properties":{"Id":0,"Letter":"E","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.293754202943944],[-82.2183816087151,41.293754202943944],[-82.2183816087151,41.29628297512788],[-82.2208181288326,41.29628297512788],[-82.2208181288326,41.293754202943944]]]},"properties":{"Id":0,"Letter":"F","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.293754202943944],[-82.2159450885976,41.293754202943944],[-82.2159450885976,41.29628297512788],[-82.2183816087151,41.29628297512788],[-82.2183816087151,41.293754202943944]]]},"properties":{"Id":0,"Letter":"G","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.293754202943944],[-82.21350856848011,41.293754202943944],[-82.21350856848011,41.29628297512788],[-82.2159450885976,41.29628297512788],[-82.2159450885976,41.293754202943944]]]},"properties":{"Id":0,"Letter":"H","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.293754202943944],[-82.21107204836261,41.293754202943944],[-82.21107204836261,41.29628297512788],[-82.21350856848011,41.29628297512788],[-82.21350856848011,41.293754202943944]]]},"properties":{"Id":0,"Letter":"I","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.293754202943944],[-82.20863552824511,41.293754202943944],[-82.20863552824511,41.29628297512788],[-82.21107204836261,41.29628297512788],[-82.21107204836261,41.293754202943944]]]},"properties":{"Id":0,"Letter":"J","Number":6}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.29628297512788],[-82.2305642093026,41.29628297512788],[-82.2305642093026,41.29881174731182],[-82.2330007294201,41.29881174731182],[-82.2330007294201,41.29628297512788]]]},"properties":{"Id":0,"Letter":"A","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.29628297512788],[-82.2281276891851,41.29628297512788],[-82.2281276891851,41.29881174731182],[-82.2305642093026,41.29881174731182],[-82.2305642093026,41.29628297512788]]]},"properties":{"Id":0,"Letter":"B","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.29628297512788],[-82.2256911690676,41.29628297512788],[-82.2256911690676,41.29881174731182],[-82.2281276891851,41.29881174731182],[-82.2281276891851,41.29628297512788]]]},"properties":{"Id":0,"Letter":"C","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.29628297512788],[-82.2232546489501,41.29628297512788],[-82.2232546489501,41.29881174731182],[-82.2256911690676,41.29881174731182],[-82.2256911690676,41.29628297512788]]]},"properties":{"Id":0,"Letter":"D","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.29628297512788],[-82.2208181288326,41.29628297512788],[-82.2208181288326,41.29881174731182],[-82.2232546489501,41.29881174731182],[-82.2232546489501,41.29628297512788]]]},"properties":{"Id":0,"Letter":"E","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.29628297512788],[-82.2183816087151,41.29628297512788],[-82.2183816087151,41.29881174731182],[-82.2208181288326,41.29881174731182],[-82.2208181288326,41.29628297512788]]]},"properties":{"Id":0,"Letter":"F","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.29628297512788],[-82.2159450885976,41.29628297512788],[-82.2159450885976,41.29881174731182],[-82.2183816087151,41.29881174731182],[-82.2183816087151,41.29628297512788]]]},"properties":{"Id":0,"Letter":"G","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.29628297512788],[-82.21350856848011,41.29628297512788],[-82.21350856848011,41.29881174731182],[-82.2159450885976,41.29881174731182],[-82.2159450885976,41.29628297512788]]]},"properties":{"Id":0,"Letter":"H","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.29628297512788],[-82.21107204836261,41.29628297512788],[-82.21107204836261,41.29881174731182],[-82.21350856848011,41.29881174731182],[-82.21350856848011,41.29628297512788]]]},"properties":{"Id":0,"Letter":"I","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.29628297512788],[-82.20863552824511,41.29628297512788],[-82.20863552824511,41.29881174731182],[-82.21107204836261,41.29881174731182],[-82.21107204836261,41.29628297512788]]]},"properties":{"Id":0,"Letter":"J","Number":7}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.30134051949576],[-82.2330007294201,41.298811747311824],[-82.2305642093026,41.298811747311824],[-82.2305642093026,41.30134051949576],[-82.2330007294201,41.30134051949576]]]},"properties":{"Id":0,"Letter":"A","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.298811747311824],[-82.2281276891851,41.298811747311824],[-82.2281276891851,41.30134051949576],[-82.2305642093026,41.30134051949576],[-82.2305642093026,41.298811747311824]]]},"properties":{"Id":0,"Letter":"B","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.298811747311824],[-82.2256911690676,41.298811747311824],[-82.2256911690676,41.30134051949576],[-82.2281276891851,41.30134051949576],[-82.2281276891851,41.298811747311824]]]},"properties":{"Id":0,"Letter":"C","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.298811747311824],[-82.2232546489501,41.298811747311824],[-82.2232546489501,41.30134051949576],[-82.2256911690676,41.30134051949576],[-82.2256911690676,41.298811747311824]]]},"properties":{"Id":0,"Letter":"D","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.298811747311824],[-82.2208181288326,41.298811747311824],[-82.2208181288326,41.30134051949576],[-82.2232546489501,41.30134051949576],[-82.2232546489501,41.298811747311824]]]},"properties":{"Id":0,"Letter":"E","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.298811747311824],[-82.2183816087151,41.298811747311824],[-82.2183816087151,41.30134051949576],[-82.2208181288326,41.30134051949576],[-82.2208181288326,41.298811747311824]]]},"properties":{"Id":0,"Letter":"F","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.298811747311824],[-82.2159450885976,41.298811747311824],[-82.2159450885976,41.30134051949576],[-82.2183816087151,41.30134051949576],[-82.2183816087151,41.298811747311824]]]},"properties":{"Id":0,"Letter":"G","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.298811747311824],[-82.21350856848011,41.298811747311824],[-82.21350856848011,41.30134051949576],[-82.2159450885976,41.30134051949576],[-82.2159450885976,41.298811747311824]]]},"properties":{"Id":0,"Letter":"H","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.298811747311824],[-82.21107204836261,41.298811747311824],[-82.21107204836261,41.30134051949576],[-82.21350856848011,41.30134051949576],[-82.21350856848011,41.298811747311824]]]},"properties":{"Id":0,"Letter":"I","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.298811747311824],[-82.20863552824511,41.298811747311824],[-82.20863552824511,41.30134051949576],[-82.21107204836261,41.30134051949576],[-82.21107204836261,41.298811747311824]]]},"properties":{"Id":0,"Letter":"J","Number":8}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2330007294201,41.30134051949576],[-82.2305642093026,41.30134051949576],[-82.2305642093026,41.303869291679696],[-82.2330007294201,41.303869291679696],[-82.2330007294201,41.30134051949576]]]},"properties":{"Id":0,"Letter":"A","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.30134051949576],[-82.2281276891851,41.30134051949576],[-82.2281276891851,41.303869291679696],[-82.2305642093026,41.303869291679696],[-82.2305642093026,41.30134051949576]]]},"properties":{"Id":0,"Letter":"B","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.30134051949576],[-82.2256911690676,41.30134051949576],[-82.2256911690676,41.303869291679696],[-82.2281276891851,41.303869291679696],[-82.2281276891851,41.30134051949576]]]},"properties":{"Id":0,"Letter":"C","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.30134051949576],[-82.2232546489501,41.30134051949576],[-82.2232546489501,41.303869291679696],[-82.2256911690676,41.303869291679696],[-82.2256911690676,41.30134051949576]]]},"properties":{"Id":0,"Letter":"D","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.30134051949576],[-82.2208181288326,41.30134051949576],[-82.2208181288326,41.303869291679696],[-82.2232546489501,41.303869291679696],[-82.2232546489501,41.30134051949576]]]},"properties":{"Id":0,"Letter":"E","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.30134051949576],[-82.2183816087151,41.30134051949576],[-82.2183816087151,41.303869291679696],[-82.2208181288326,41.303869291679696],[-82.2208181288326,41.30134051949576]]]},"properties":{"Id":0,"Letter":"F","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.30134051949576],[-82.2159450885976,41.30134051949576],[-82.2159450885976,41.303869291679696],[-82.2183816087151,41.303869291679696],[-82.2183816087151,41.30134051949576]]]},"properties":{"Id":0,"Letter":"G","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.30134051949576],[-82.21350856848011,41.30134051949576],[-82.21350856848011,41.303869291679696],[-82.2159450885976,41.303869291679696],[-82.2159450885976,41.30134051949576]]]},"properties":{"Id":0,"Letter":"H","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.30134051949576],[-82.21107204836261,41.30134051949576],[-82.21107204836261,41.303869291679696],[-82.21350856848011,41.303869291679696],[-82.21350856848011,41.30134051949576]]]},"properties":{"Id":0,"Letter":"I","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.30134051949576],[-82.20863552824511,41.30134051949576],[-82.20863552824511,41.303869291679696],[-82.21107204836261,41.303869291679696],[-82.21107204836261,41.30134051949576]]]},"properties":{"Id":0,"Letter":"J","Number":9}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.30639806386364],[-82.2330007294201,41.30639806386364],[-82.2330007294201,41.3038692916797],[-82.2305642093026,41.3038692916797],[-82.2305642093026,41.30639806386364]]]},"properties":{"Id":0,"Letter":"A","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2305642093026,41.3038692916797],[-82.2281276891851,41.3038692916797],[-82.2281276891851,41.30639806386364],[-82.2305642093026,41.30639806386364],[-82.2305642093026,41.3038692916797]]]},"properties":{"Id":0,"Letter":"B","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2281276891851,41.3038692916797],[-82.2256911690676,41.3038692916797],[-82.2256911690676,41.30639806386364],[-82.2281276891851,41.30639806386364],[-82.2281276891851,41.3038692916797]]]},"properties":{"Id":0,"Letter":"C","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2256911690676,41.3038692916797],[-82.2232546489501,41.3038692916797],[-82.2232546489501,41.30639806386364],[-82.2256911690676,41.30639806386364],[-82.2256911690676,41.3038692916797]]]},"properties":{"Id":0,"Letter":"D","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2232546489501,41.3038692916797],[-82.2208181288326,41.3038692916797],[-82.2208181288326,41.30639806386364],[-82.2232546489501,41.30639806386364],[-82.2232546489501,41.3038692916797]]]},"properties":{"Id":0,"Letter":"E","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2208181288326,41.3038692916797],[-82.2183816087151,41.3038692916797],[-82.2183816087151,41.30639806386364],[-82.2208181288326,41.30639806386364],[-82.2208181288326,41.3038692916797]]]},"properties":{"Id":0,"Letter":"F","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2183816087151,41.3038692916797],[-82.2159450885976,41.3038692916797],[-82.2159450885976,41.30639806386364],[-82.2183816087151,41.30639806386364],[-82.2183816087151,41.3038692916797]]]},"properties":{"Id":0,"Letter":"G","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.2159450885976,41.3038692916797],[-82.21350856848011,41.3038692916797],[-82.21350856848011,41.30639806386364],[-82.2159450885976,41.30639806386364],[-82.2159450885976,41.3038692916797]]]},"properties":{"Id":0,"Letter":"H","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21350856848011,41.3038692916797],[-82.21107204836261,41.3038692916797],[-82.21107204836261,41.30639806386364],[-82.21350856848011,41.30639806386364],[-82.21350856848011,41.3038692916797]]]},"properties":{"Id":0,"Letter":"I","Number":10}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-82.21107204836261,41.3038692916797],[-82.20863552824511,41.3038692916797],[-82.20863552824511,41.30639806386364],[-82.21107204836261,41.30639806386364],[-82.21107204836261,41.3038692916797]]]},"properties":{"Id":0,"Letter":"J","Number":10}}
]

var gridLayer = L.geoJSON(gridPoly, {
    onEachFeature: onEachGrid,
    style: function(feature) {
            return{
            color: "#000000", 
            fillOpacity: 0, 
            weight: 3,
            } 
    }
});

var buildingsArray = [];

var buildingLayer = L.geoJSON(false, {
    onEachFeature: function(feature, layer) {

        var buildPopup = '<p><b>' + 'Building' + ':</b>&nbsp' + feature.properties.Name + '</p>';

        if (feature.properties && feature.properties.Name) {
            layer.bindPopup(buildPopup);
            console.log(feature.properties.Name);
            console.log(feature.geometry.coordinates);
            buildingsArray.push({
                    NAME: feature.properties.Name,
                    BUILT: feature.properties.YearBuilt,
                    EXISTED: feature.properties.Year,
                    NUMBER: feature.properties.IdNo,
                    LOCATION: feature.geometry.coordinates
                })

        }

    },
    filter: function(feature, layer) {
        if (feature.properties.Year == currentYear){
            feature.properties.Id = true;
        }
        else if(feature.properties.Year != currentYear){
            feature.properties.Id = false;
        }
        return feature.properties.Id;
    },
    style: function(feature) {
//        console.log(feature.properties.YearBuilt);
        var buildingYearVariable = feature.properties.YearBuilt;
        var buildingYearVariableNum = Number(buildingYearVariable);
        var currentYearNum = Number(currentYear);
        
        
        if (buildingYearVariableNum == currentYearNum) {
            return {color: "#A06137", fillOpacity: 1, weight: 0};
            
        }
        else {
            return {color: "#131313", fillOpacity: 1, weight: 0};
        }

        
    }
});


function onEachGrid(feature, layer) {

    var gridPopup = '<p><b>' + 'Grid' + ':</b>&nbsp' + feature.properties.Letter + feature.properties.Number + '</p>';

    if (feature.properties && feature.properties.Letter) {
        layer.bindPopup(gridPopup);
    }

}

function addLegend(){
    L.Control.Watermark = L.Control.extend({
        onAdd: function(map) {
            var img = L.DomUtil.create('img');

            img.src = '/data/Legend2.svg';
            img.style.width = '150px';

            return img;
        },

        onRemove: function(map) {
            // Nothing to do here
        }
    });

    L.control.watermark = function(opts) {
        return new L.Control.Watermark(opts);
    }

    L.control.watermark({ position: 'bottomleft' }).addTo(currentMap);
}

function enablePrint(customBaseLayer){
     var printer = L.easyPrint({
            tileLayer: customBaseLayer,
      		sizeModes: ['Current'],
            defaultSizeTitles: {Current: 'Print Current Map Extent'},
      		filename: 'myMap',
      		exportOnly: false,
      		hideControlContainer: true
		}).addTo(currentMap);

		function manualPrint () {
			printer.printMap('CurrentSize', 'MyManualPrint')
		}
}

// Function to instantiate the Leaflet map
function createMap(){
    
    // Add OSM base tilelayer and other base layers
    var customBaseLayer = L.tileLayer('https://api.mapbox.com/styles/v1/cmflood/ck61befo808t51in1yr5n0sul/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY21mbG9vZCIsImEiOiJjamt5OW01bzkwaDNkM3ZwNDdlMjkzbnhxIn0.YM5MN8JltD_tvyZY0qMnRQ', {
        attribution: '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a> | <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 25,
        id: 'cmflood',
        detectRetina: true //keeps tileset from being blurry on high res screens
    });

    //base layer options
    var mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
        '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiY21mbG9vZCIsImEiOiJjamt5OW01bzkwaDNkM3ZwNDdlMjkzbnhxIn0.YM5MN8JltD_tvyZY0qMnRQ';

  

   
    
    // Create the map
    var mapid = L.map('map', {
        center: [41.29237, -82.216],
        zoom: 15,
        minZoom: 12,
        zoomSnap: 0.2, //setting this overides the default value of 1 which means the zoom levels can be in integers/multiples of this number
        //set to false to overide default position
        zoomControl: false,
        layers: customBaseLayer //sets which base layer is loaded first
    });

    //add zoom control with original extent button that references leaflet plugin zoomhome
    var zoomHome = L.Control.zoomHome({
        position: 'bottomright',
        zoomHomeIcon: 'globe'
    });
    zoomHome.addTo(mapid);
    
    
    var baseLayers = {
        "Base Map": customBaseLayer
    };

    layerControl = new L.control.layers(baseLayers, null).addTo(mapid);
    
    //adding only the control and not the grid layer to the map means it is turned off on first map load, and can be turned on with the layer legend
    layerControl.addOverlay(gridLayer, "Grid"); //adds layer control of buidings
    
    buildingLayer.addTo(mapid); //adds empty layer to map
    buildingLayer.addData(Oberlin2); //populates empty layer with geojson data
    layerControl.addOverlay(buildingLayer, "Buildings"); //adds layer control of buidings
    GenerateTable();
    
    // Set global map variable to map object
    currentMap = mapid;
    enablePrint(customBaseLayer);
    
    //adds image of Legend
    addLegend();
    findInTable();
    
    

};



//function to open wolf form
$(function(){
    $("#buildingDirec").click(function(){
        $('.collapse').collapse('hide'); //closes the location nav menu when the side opens
        $('#timeHolder').hide(500);
        $('#buildHolder').show('slow');
    });
});

//function to close wolf form
$(function(){
    $('#buildClose').click(function() {
        $('#buildHolder').hide(500);

    });
});

//function to open time area
$(function(){
    $("#timebtn").click(function(){
        $('.collapse').collapse('hide'); //closes the location nav menu when the side opens
        $('#buildHolder').hide(500);
        $('#timeHolder').show('slow');
    });
});

//function to close time sidebar
$(function(){
    $('#timesearchClose').click(function() {
        $('#timeHolder').hide(500);
    });
});

$(function(){
    $("#year_submit_btn").click(function(event){
        event.preventDefault();
        
        
        var yearArray = $("#year_form").serializeArray();
//        console.log(yearArray);
//        console.log(yearArray[0].value);
        currentYear = yearArray[0].value;
        buildingsArray.length = 0;
        
        buildingLayer.clearLayers();
        buildingLayer.addData(Oberlin2);
        GenerateTable();
        $("#yearHeader" ).empty();
        $('#yearHeader').append("<h3><b>"+currentYear+"</b></h3>");
        

    });
});

function GenerateTable() {

     //Create a HTML Table element.
//    var table = document.createElement("TABLE");
//    table.border = "1";
    var table = document.getElementById("myTable");
    table.border = "1";

    table.getElementsByTagName("tbody")[0].innerHTML = table.rows[0].innerHTML;
    

    //Add the header row. DON"T NEE
//    var row = table.insertRow(-1);
//        var headerCell = document.createElement("TH");
//        headerCell.innerHTML = "Name";  //Fieldname
//        row.appendChild(headerCell);
//        var headerCell = document.createElement("TH");
//        headerCell.innerHTML = "Number";   //Fieldname
//        row.appendChild(headerCell);
//        var headerCell = document.createElement("TH");
//        headerCell.innerHTML = "Archive Link";   //Fieldname
//        row.appendChild(headerCell);
//        var headerCell = document.createElement("TH");
//        headerCell.innerHTML = "Grid Location";   //Fieldname
//        row.appendChild(headerCell);

    console.log("here");
    console.log(buildingsArray);
    //Add the data rows. 
    for (var i = 0; i < buildingsArray.length; i++) {
        row = table.insertRow(-1);

            var cell = row.insertCell(-1);
            cell.innerHTML = buildingsArray[i].NUMBER;
            var cell = row.insertCell(-1);
            cell.innerHTML = buildingsArray[i].NAME;
            var cell = row.insertCell(-1);
            cell.innerHTML = buildingsArray[i].ARCHIVELINK;
            var cell = row.insertCell(-1);
            cell.innerHTML = buildingsArray[i].GRIDID;

    }

    var dvTable = document.getElementById("tableholder");
    
    
//    dvTable.innerHTML = '<p><strong>' + 'Click the headers to sort the table.' + '</strong></p> &nbsp' + '<p>' + 'The first time you click, the sorting direction is ascending (A to Z).' + '</p>' + 
//                            '<p>' + 'Click again, and the sorting direction will be descending (Z to A).' + '</p>';
//    dvTable.appendChild(table);

}

//function that lets you click on a table cell and get its value
function findInTable(){
    var tbl = document.getElementById("myTable");

    if (tbl != null) {
        for (var i = 0; i < tbl.rows.length; i++) {
            for (var j = 0; j < tbl.rows[i].cells.length; j++)
                tbl.rows[i].cells[j].onclick = function () { getval(this); 
                                                           console.log(this);
                                                           };
        }
    }
    else{
        console.log("whoops");
    }

    //function that when you click on a table cell name, will zoom you to the building
    function getval(cel) {
        //gets cell contents
        var clickBuildingName = (cel.innerHTML);
        
        //iterates through buildings array to search for a building who's name matches the one clicked on
        for (var i=0;i<buildingsArray.length;i+=1) {
            var buildingName = buildingsArray[i].NAME;
            if (buildingName == clickBuildingName){
                buildingLayer.eachLayer(function (layer) {
                      if (layer.feature.properties.Name === buildingName) {
                        // Zoom to that layer.
                        currentMap.fitBounds(layer.getBounds());
                      }
                    });
            }
            var buildingLocation = buildingsArray[i].LOCATION
        }
    }
}



//sort table by headers
function sortTable(n) {
  var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
  table = document.getElementById("myTable");
  switching = true;
  // Set the sorting direction to ascending:
  dir = "asc";
  /* Make a loop that will continue until
  no switching has been done: */
  while (switching) {
    // Start by saying: no switching is done:
    switching = false;
    rows = table.rows;
    /* Loop through all table rows (except the
    first, which contains table headers): */
    for (i = 1; i < (rows.length - 1); i++) {
      // Start by saying there should be no switching:
      shouldSwitch = false;
      /* Get the two elements you want to compare,
      one from current row and one from the next: */
      x = rows[i].getElementsByTagName("TD")[n];
      y = rows[i + 1].getElementsByTagName("TD")[n];
      /* Check if the two rows should switch place,
      based on the direction, asc or desc: */
      if (dir == "asc") {
        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
          // If so, mark as a switch and break the loop:
          shouldSwitch = true;
          break;
        }
      } else if (dir == "desc") {
        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
          // If so, mark as a switch and break the loop:
          shouldSwitch = true;
          break;
        }
      }
    }
    if (shouldSwitch) {
      /* If a switch has been marked, make the switch
      and mark that a switch has been done: */
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
      // Each time a switch is done, increase this count by 1:
      switchcount ++;
    } else {
      /* If no switching has been done AND the direction is "asc",
      set the direction to "desc" and run the while loop again. */
      if (switchcount == 0 && dir == "asc") {
        dir = "desc";
        switching = true;
      }
    }
  }
}




$(document).ready(createMap);




